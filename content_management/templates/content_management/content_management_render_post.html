{% extends "content_management/content_management_base.html" %}

{% load static %}

{% block head_title %} {% if requested_post %} {{ requested_post.post_name }} {% else %} {{ requested_posts.0.post_name }} {% endif%} {% endblock %}
{% block navbar_header %} 
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-sibbling" style="float:left;">
                     <span class="sr-only">Toggle navigation</span>
                    <!-- <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>-->
					Sibbling Posts
                 </button>




{{ requested_post.author.username }} 
{% endblock %}

{% block body %}

	<div class="row">
		{% if requested_posts %}
			<div class="page-header">
				<a href="/subjects{{requested_post.category.url }}"><i class="fa fa-chevron-left"></i> {{requested_post.category.name }}</a>
				<h3 style="text-align:center;">{{ requested_post.title }}</h3>
			</div>
			{% for post in requested_posts %}		
				<div class="well well-lg">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title"><a href='/subjects{{post.url}}author/{{post.author.username}}'>{{ post.post_name }}: {{post.title}}</a></h3>{{ post.author.username }}
						</div>
					</div>									
				</div>
			{% endfor %}
		{% else %}
		<div class="col-md-3 col-md-push-9 navbar-sibbling">
			{% if sibbling_posts %}
				<div class="list-group" style="padding-top:20px;">
        			<span href="#" class="list-group-item text-center">
          				<strong style="font-size:20px;"> {{ requested_post.category.name }}</strong></span> 
            			<span class="pull-right" id="slide-submenu">
                			<i class="fa fa-times"></i>
        				</span>
					<div id="sibblings">	
						{%for post in sibbling_posts %}
							{% if post.url == requested_post.url and post.author == requested_post.author %}
								<a class='list-group-item active' href='/subjects{{post.url}}author/{{post.author.username}}'>{{post.post_name}}</a>
							{% else %}
								<a class='list-group-item ' href='/subjects{{ post.url }}author/{{ post.author.username }}'> {{ post.post_name }}</a>
							{% endif %}	
						{% endfor %}
					</div>
				</div>
			{% endif %}
		</div>

		<div class="col-md-9 col-md-pull-3">
			<div id="content" style="padding-left:10px; ">
				<link rel="stylesheet" type="text/css" href="{% static "html/css/cke-editor.css" %}"/>
				<div class="page-header">
					<a href="/subjects{{requested_post.category.url }}"><i class="fa fa-chevron-left"></i> {{requested_post.category.name }}</a>
					<h3 style="text-align:center;">{{ requested_post.title }}</h3>
				</div>
				{% autoescape off %}
					{{ requested_post.content }}
				{% endautoescape %}
			</div>
			<ul class="pager">
				<li class="previous disabled"><a id="previous" href="">&larr; Previous</a></li>
				<li class="next disabled"><a id="next" href="">Next &rarr;</a></li>					
			</ul>
			<script>
				prev = $("#sibblings .active").prev();	
				next = $("#sibblings .active").next();
				if (prev.length>0){
					$(".pager .previous").removeClass("disabled");
					$(".pager #previous").html("&larr;" + prev.html());
					$(".pager #previous").attr("href", prev.attr("href"));
				}
				if (next.length>0){
					$(".pager .next").removeClass("disabled");
					$(".pager #next").html( next.html() + "&rarr;");
					$(".pager #next").attr("href", next.attr("href"));
				}
			</script>
		</div>
{% endif %}
</div>
{% endblock %}
